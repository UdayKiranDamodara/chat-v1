(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,n,t){},73:function(e,n,t){},74:function(e,n,t){},76:function(e,n,t){"use strict";t.r(n);var s=t(1),c=t(34),a=t.n(c),o=(t(41),t(36)),r=t(8),i=t(35),u=t.n(i),l=(t(73),t(74),t(0));function m(e){var n=e.index,t=e.message,c=e.currentUser;return Object(s.useEffect)((function(){console.log("currentUser: ",c)}),[]),Object(l.jsxs)("div",{className:"messageContainer ".concat(t.from===c?"right":"left"," ").concat(0===n?"mt-auto":""),children:[Object(l.jsx)("div",{className:"senderName",children:t.from}),Object(l.jsx)("div",{className:"messageContent",children:t.message})]})}var d=function(){var e=Object(s.useState)(!1),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(s.useState)(""),i=Object(r.a)(a,2),d=i[0],j=i[1],f=Object(s.useState)(null),b=Object(r.a)(f,2),g=b[0],O=b[1],h=Object(s.useState)([]),p=Object(r.a)(h,2),v=p[0],x=p[1],N=Object(s.useState)(""),k=Object(r.a)(N,2),S=k[0],y=k[1],w=Object(s.useRef)();Object(s.useEffect)((function(){g&&(g.on("connect",(function(){console.log("socket connected",g.id)})),g.on("name already taken",(function(e){console.log(e),alert("username is already taken"),g.disconnect()})),g.on("connection-established",(function(e){!0===e&&c(!0),g.emit("message",{id:g.id,message:"Thanks for adding me!"})})),g.on("message",(function(e){console.log(e),x((function(n){return[].concat(Object(o.a)(n),[e])})),w.current.scrollTop=w.current.scrollHeight})))}),[g]);return!1===t?Object(l.jsxs)("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),console.log(""===d),""!==d){var n=u()("https://chat-app-ukd-v1.herokuapp.com/",{transports:["websocket"],auth:{name:d}});console.log(n),O((function(e){return n}))}}(e)},className:"loginForm",children:[Object(l.jsx)("input",{className:"loginInput",placeholder:"Enter the name",value:d,onChange:function(e){return j(e.target.value)}}),Object(l.jsx)("button",{className:"loginButton",type:"submit",children:"Login"})]}):Object(l.jsxs)("div",{className:"chat-window",children:[Object(l.jsx)("div",{className:"messages-container",ref:w,children:v.map((function(e,n){return Object(l.jsx)(m,{index:n,message:e,currentUser:d},n)}))}),Object(l.jsxs)("form",{className:"sendMessageContainer",onSubmit:function(e){return function(e){e.preventDefault(),""!==S&&g.emit("message",{id:g.id,message:S}),y("")}(e)},children:[Object(l.jsx)("input",{className:"sendMessageInput",placeholder:"Start Typing...",value:S,onChange:function(e){return y(e.target.value)}}),Object(l.jsx)("button",{className:"sendMessageButton",type:"submit",children:"Send"})]})]})};a.a.render(Object(l.jsx)(d,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.a6febb9d.chunk.js.map