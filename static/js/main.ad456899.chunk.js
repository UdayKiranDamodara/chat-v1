(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(34),a=n.n(s),o=(n(41),n(36)),r=n(8),u=n(35),i=n.n(u),l=(n(73),n(74),n(0));function j(e){var t=e.index,n=e.message,s=e.currentUser;return Object(c.useEffect)((function(){console.log("currentUser: ",s)}),[]),Object(l.jsxs)("div",{className:"messageContainer ".concat(n.from===s?"right":"left"," ").concat(0===t?"mt-auto":""),children:[Object(l.jsx)("div",{className:"senderName",children:n.from}),Object(l.jsx)("div",{className:"messageContent",children:n.message})]})}var m=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),u=Object(r.a)(a,2),m=u[0],d=u[1],b=Object(c.useState)(null),f=Object(r.a)(b,2),g=f[0],O=f[1],h=Object(c.useState)([]),p=Object(r.a)(h,2),v=p[0],x=p[1],N=Object(c.useState)(""),S=Object(r.a)(N,2),k=S[0],y=S[1],w=Object(c.useRef)();Object(c.useEffect)((function(){g&&(g.on("connect",(function(){console.log("socket connected",g.id)})),g.on("name already taken",(function(e){console.log(e),alert("username is already taken"),g.disconnect()})),g.on("connection-established",(function(e){!0===e&&s(!0)})),g.on("message",(function(e){console.log(e),x((function(t){return[].concat(Object(o.a)(t),[e])})),w.current.scrollTop=w.current.scrollHeight})))}),[g]);return!1===n?Object(l.jsxs)("form",{onSubmit:function(e){return function(e){if(e.preventDefault(),console.log(""===m),""!==m){var t=i()("https://chat-app-ukd-v1.herokuapp.com/",{transports:["websocket"],auth:{name:m}});console.log(t),O((function(e){return t}))}}(e)},className:"loginForm",children:[Object(l.jsx)("input",{className:"loginInput",placeholder:"Enter the name",value:m,onChange:function(e){return d(e.target.value)}}),Object(l.jsx)("button",{className:"loginButton",type:"submit",children:"Login"})]}):Object(l.jsxs)("div",{className:"chat-window",children:[Object(l.jsx)("div",{className:"messages-container",ref:w,children:v.map((function(e,t){return Object(l.jsx)(j,{index:t,message:e,currentUser:m},t)}))}),Object(l.jsxs)("form",{className:"sendMessageContainer",onSubmit:function(e){return function(e){e.preventDefault(),""!==k&&g.emit("message",{id:g.id,message:k}),y("")}(e)},children:[Object(l.jsx)("input",{className:"sendMessageInput",placeholder:"Start Typing...",value:k,onChange:function(e){return y(e.target.value)}}),Object(l.jsx)("button",{className:"sendMessageButton",type:"submit",children:"Send"})]})]})};a.a.render(Object(l.jsx)(m,{}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.ad456899.chunk.js.map